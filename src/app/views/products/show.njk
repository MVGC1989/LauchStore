{% extends "layout.njk" %}

{% block content %}

<section class="product_single container">

    <div class="gallery">
        <div class="highlight">
            {% if not files[0] %} {#se não houver imagem #}
                <img src="http://placehold.it/500x500?text=PRODUTO SEM FOTO">
            {% else %}
                <img 
                    src="{{files[0].src}}" 
                    alt="{{files[0].name}}"
                    onclick="Lightbox.open()">
            {% endif %}

            <div class="lightbox_target">
                <img 
                src="{{files[0].src}}" 
                alt="{{files[0].name}}">

                <a 
                    href="#" 
                    class="lightbox_close"
                    onclick = "Lightbox.close()">
                        <i class="material-icons">close</i>
                </a>
            </div>

        </div>

        <div class="gallery_preview">
            {% for image in files %}
            <img 
                src="{{image.src}}" 
                alt="{{image.name}}"
                {% if loop.index == 0 %}
                class="active"
                {% endif %}
                onclick="Image_Gallery.set_image(event)"
                >
            {% endfor %}
        </div>
    </div>

    <div class="info">
        <h1>{{product.name}} </h1>
        <div class="published">
            Publicado em {{product.published.day}} às {{product.published.hour}} 
        </div>

        <div class="description">
            {{product.description}} 
        </div>

        <div class="price_buy">
            <div class="price">
                {{product.price}} 
                    {% if product.price !== product.oldPrice %} {#se o preço atual for diferente do antigo mostrar o preço antigo#}
                        <span class="old">{{product.oldPrice}} </span>
                    {% endif %}
            </div>

            <div class="buy">{#se estiver indisponivel ou sem estoque terei botoes diferentes#}
                {% if product.status == 0 %}
                    <p class="unavailable">Indisponível</p>
                {%elseif product.quantity == 0%}
                    <p class="unavailable">Fora de Estoque</p>
                {% else %}
                    <button class="button">Comprar</button>
                {% endif %}
            </div>
        </div>
    </div>
</section>

{% endblock content %}